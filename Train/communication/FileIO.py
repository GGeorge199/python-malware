import requests
from Train.supply.Validation import Validator

HTTPS_FILE_IO = 'https://file.io'


def upload_file(file_path: str = None, file_content: str = None, url_file_host: str = None):
    if Validator.check_if_arguments_empty(file_path, file_content):
        return Exception("Illegal arguments")
    if Validator.check_if_arguments_defined(file_path, file_content):
        return Exception("Only one of arguments must be defined")
    if not file_content:
        with open(file_path, 'r') as file:
            file_content = file.read()
    try:
        if not url_file_host:
            url_file_host = HTTPS_FILE_IO
        request = requests.post(url='%s' % url_file_host,
                                data={"text": file_content})
    except:
        return ConnectionError("Connection Error")

    return request.json()['link']


if __name__ == '__main__':
    print(upload_file(None, "asdaw"))
